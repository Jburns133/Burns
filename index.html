<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Retro Bio-Scan Demo — Fixed</title>
<style>
  :root{
    --accent:#00ff88;
    --accent-2:#ff2b2b;
    --glass: rgba(0,0,0,0.45);
    --mono:'Courier New',monospace;
  }
  html,body{height:100%;margin:0;background:#000;font-family:var(--mono);color:var(--accent);overflow:hidden}
  .stage{width:100%;height:100%;position:relative;display:flex;align-items:center;justify-content:center}
  /* ---------- Screen 1 ---------- */
  #screen-welcome{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;
    background:
      radial-gradient(circle at 50% 10%, #0a1726 0 32%, transparent 33%),
      repeating-linear-gradient(0deg,#06121d 0 2px,#030a12 2px 4px),
      #030a12;}
  .prompt{margin:28px;align-self:flex-start;color:#e6f3ff;font-size:18px;background:rgba(0,0,0,0.6);padding:8px 12px;border-radius:6px;display:flex;gap:12px;align-items:center;box-shadow:0 6px 16px rgba(0,0,0,0.6)}
  .prompt .cursor{font-weight:700;color:#bfffd6}
  .enter-btn{
    background:linear-gradient(180deg,#cfd09a,#9a9f7a);color:#042118;padding:6px 12px;border-radius:4px;font-weight:700;border:3px solid #303020;cursor:pointer;
    box-shadow: 2px 3px 0 rgba(0,0,0,0.35) inset, 0 6px 12px rgba(0,0,0,0.6);
    transform:translateY(0);transition:transform .08s ease;
  }
  .enter-btn:active{transform:translateY(2px)}
  /* ---------- Screen 2 ---------- */
  #screen-scan{position:absolute;inset:0;display:none;align-items:center;justify-content:center;background:#000}
  .scan-wrap{width:min(1100px,93vw);height:min(720px,85vh);display:flex;gap:18px;align-items:stretch}
  .left-panel{flex:0 0 56%;position:relative;background:#07101a;border:2px solid rgba(0,255,136,0.06);box-shadow:0 10px 40px rgba(0,0,0,0.9);overflow:hidden;border-radius:6px}
  .scanbox{position:absolute;inset:0;background:#001218}
  /* grid */
  .scanbox::before{
    content:"";position:absolute;inset:6% 10%;border:2px solid rgba(255,200,0,0.45);mix-blend-mode:screen;
    background-image:
      linear-gradient(to bottom, rgba(255,200,0,0.06) 0 1px, transparent 1px),
      linear-gradient(to right, rgba(255,200,0,0.04) 0 1px, transparent 1px);
    background-size:100% 40px, 40px 100%;
  }
  /* sweep */
  .sweep{
    position:absolute;left:-30%;top:-10%;width:40%;height:120%;
    background:linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.03) 45%, rgba(255,255,255,0.10) 50%, rgba(255,255,255,0.03) 55%, rgba(255,255,255,0) 100%);
    transform:skewX(-18deg);animation:sweep 3s linear infinite;mix-blend-mode:screen;filter:blur(.4px)
  }
  @keyframes sweep{0%{left:-30%}50%{left:60%}100%{left:120%}}
  /* silhouette */
  .sil-wrap{position:absolute;inset:0;display:grid;place-items:center;pointer-events:none}
  .sil-wrap svg{width:min(70%,420px);height:auto;stroke:#75ffb9;stroke-width:2;fill:none;opacity:.8;filter:drop-shadow(0 0 6px rgba(0,255,136,.15))}
  .bottom-banner{position:absolute;left:0;right:0;bottom:0;padding:12px;background:linear-gradient(180deg, transparent, rgba(0,0,0,0.7));text-align:center;color:#cfeee0;font-weight:800;font-size:14px;letter-spacing:1px}
  .side-panel{flex:0 0 38%;padding:18px;background:linear-gradient(180deg, rgba(0,0,0,0.55), rgba(0,0,0,0.3));border-radius:6px;border:2px solid rgba(0,255,136,0.06);display:flex;flex-direction:column;gap:10px}
  .hud-title{font-size:18px;color:#ff8c8c;letter-spacing:1px}
  .hud-sub{font-size:12px;color:#9fded0}
  .biometrics{background:linear-gradient(90deg, rgba(0,0,0,0.2), rgba(0,0,0,0.05));padding:10px;border-radius:6px;flex:1;display:flex;flex-direction:column;gap:4px;overflow:auto}
  .bio-row{display:flex;justify-content:space-between;padding:6px 6px;border-bottom:1px dashed rgba(255,255,255,0.06)}
  .bio-label{color:#8de2c5;font-size:12px}
  .bio-value{color:#fff;font-weight:700;font-size:12px}
  .status{height:36px;display:flex;align-items:center;justify-content:center;border-radius:6px;background:#021016;color:#bfffd6;font-weight:800;border:2px solid rgba(0,255,136,0.08);font-size:12px}
  .progress{height:6px;background:rgba(255,255,255,0.04);border-radius:999px;overflow:hidden;margin-top:6px}
  .progress > i{display:block;height:100%;width:0%;background:linear-gradient(90deg,var(--accent), #70ffb4);animation:progressAnim 4s linear forwards}
  @keyframes progressAnim{to{width:100%}}
  /* ---------- Screen 3 ---------- */
  #screen-globe{position:absolute;inset:0;display:none;align-items:center;justify-content:center;background:#000}
  .globe-wrap{position:relative;width:min(1200px,95vw);height:min(800px,90vh);display:flex;align-items:center;justify-content:center}
  .globe-bg{position:relative;width:100%;height:100%;border-radius:6px;box-shadow:0 20px 60px rgba(0,0,0,0.85);overflow:hidden;border:3px solid rgba(0,255,136,0.05);background:#06131c}
  canvas#globe{width:100%;height:100%;display:block}
  .globe-caption{position:absolute;left:24px;top:24px;color:#ffd6a6;font-weight:800;background:rgba(0,0,0,0.45);padding:8px 12px;border-radius:6px;border:1px solid rgba(255,200,150,0.06)}
  .legend{position:absolute;left:24px;bottom:20px;color:#9fded0;font-size:12px;background:rgba(0,0,0,.35);padding:6px 8px;border-radius:6px;border:1px solid rgba(0,255,136,.06)}
</style>
</head>
<body>
  <div class="stage">
    <!-- SCREEN 1 -->
    <section id="screen-welcome">
      <div class="prompt">
        <div>A:<span class="cursor">:&gt;_</span></div>
        <button class="enter-btn" id="enterBtn">Enter</button>
      </div>
    </section>

    <!-- SCREEN 2 -->
    <section id="screen-scan">
      <div class="scan-wrap">
        <div class="left-panel">
          <div class="scanbox"></div>
          <div class="sil-wrap" aria-hidden="true">
            <!-- inline silhouette -->
            <svg viewBox="0 0 260 300">
              <path d="M130 168c34 0 62-28 62-62S164 44 130 44 68 72 68 106s28 62 62 62Z"/>
              <path d="M29 262c10-38 55-64 101-64s91 26 101 64"/>
            </svg>
          </div>
          <div class="sweep"></div>
          <div class="bottom-banner"><span id="scanStatus">Searching...</span></div>
        </div>
        <aside class="side-panel">
          <div class="hud-title">CONFIRM I.D.</div>
          <div class="hud-sub">Target: JAMAR B.</div>
          <div class="biometrics">
            <div class="bio-row"><div class="bio-label">Eye color</div><div class="bio-value">Light Brown</div></div>
            <div class="bio-row"><div class="bio-label">Hair</div><div class="bio-value">Curly Black</div></div>
            <div class="bio-row"><div class="bio-label">Skin</div><div class="bio-value">Black</div></div>
            <div class="bio-row"><div class="bio-label">Height</div><div class="bio-value">5'8"</div></div>
            <div class="bio-row"><div class="bio-label">Criminal records</div><div class="bio-value">--</div></div>
          </div>
          <div class="status" id="statusText">ACQUIRING SIGNAL...</div>
          <div class="progress"><i></i></div>
          <button id="continueToGlobe" class="enter-btn" style="margin-top:12px;">TRACK</button>
        </aside>
      </div>
    </section>

    <!-- SCREEN 3 -->
    <section id="screen-globe">
      <div class="globe-wrap">
        <div class="globe-bg">
          <canvas id="globe"></canvas>
          <div class="globe-caption">GLOBAL TRACKING — NYC</div>
          <div class="legend">Orthographic globe with pulsing marker</div>
        </div>
      </div>
    </section>
  </div>

<script>
/* ---------- Screen routing ---------- */
const enterBtn=document.getElementById('enterBtn');
const contBtn=document.getElementById('continueToGlobe');
const screenWelcome=document.getElementById('screen-welcome');
const screenScan=document.getElementById('screen-scan');
const screenGlobe=document.getElementById('screen-globe');
const scanStatus=document.getElementById('scanStatus');
const statusText=document.getElementById('statusText');

function showScreen(el){
  [screenWelcome,screenScan,screenGlobe].forEach(s=>s.style.display='none');
  el.style.display='flex';
}

enterBtn.onclick=()=>{
  showScreen(screenScan);
  setTimeout(()=>{scanStatus.textContent='Signal Acquired';statusText.textContent='SIGNAL ACQUIRED'},3500);
};
contBtn.onclick=()=>showScreen(screenGlobe);
showScreen(screenWelcome);

/* ---------- Globe renderer (no external assets) ---------- */
(function(){
  const canvas = document.getElementById('globe');
  const ctx = canvas.getContext('2d', {alpha:false});
  let phi0 = toRad(30);        // center latitude
  let lambda0 = toRad(-70);    // center longitude
  const NYC = { lat: toRad(40.7128), lon: toRad(-74.0060) };

  function toRad(d){return d*Math.PI/180}
  function fit(){
    const dpr = Math.max(1, window.devicePixelRatio || 1);
    const rect = canvas.getBoundingClientRect();
    canvas.width = Math.round(rect.width * dpr);
    canvas.height = Math.round(rect.height * dpr);
    ctx.setTransform(dpr,0,0,dpr,0,0); // draw in CSS pixels
  }
  function project(lat, lon, R, cx, cy){
    const sinφ = Math.sin(lat), cosφ = Math.cos(lat);
    const sinφ0 = Math.sin(phi0), cosφ0 = Math.cos(phi0);
    const dλ = lon - lambda0;
    const cosc = sinφ0*sinφ + cosφ0*cosφ*Math.cos(dλ);
    if (cosc < 0) return null;
    const x = R * cosφ * Math.sin(dλ);
    const y = R * (cosφ0*sinφ - sinφ0*cosφ*Math.cos(dλ));
    return {x: cx + x, y: cy - y};
  }
  function drawParallel(lat, R, cx, cy){
    ctx.beginPath();
    let move=true;
    for(let lon=-180; lon<=180; lon+=2){
      const p = project(toRad(lat), toRad(lon), R, cx, cy);
      if(!p){ move=true; continue; }
      if(move){ctx.moveTo(p.x,p.y); move=false;} else ctx.lineTo(p.x,p.y);
    }
    ctx.stroke();
  }
  function drawMeridian(lon, R, cx, cy){
    ctx.beginPath();
    let move=true;
    for(let lat=-90; lat<=90; lat+=2){
      const p = project(toRad(lat), toRad(lon), R, cx, cy);
      if(!p){ move=true; continue; }
      if(move){ctx.moveTo(p.x,p.y); move=false;} else ctx.lineTo(p.x,p.y);
    }
    ctx.stroke();
  }
  function draw(){
    const w = canvas.clientWidth, h = canvas.clientHeight;
    const cx = w*0.5, cy = h*0.52;
    const R = Math.min(w,h)*0.38;

    // background
    ctx.fillStyle = '#06131c';
    ctx.fillRect(0,0,w,h);

    // sphere
    ctx.save();
    ctx.translate(cx,cy);
    ctx.beginPath(); ctx.arc(0,0,R,0,Math.PI*2); ctx.closePath();
    ctx.fillStyle = '#051018';
    ctx.fill();
    const rim = ctx.createRadialGradient(0,0,R*0.2,0,0,R);
    rim.addColorStop(0,'rgba(0,255,136,.06)');
    rim.addColorStop(1,'rgba(0,255,136,.18)');
    ctx.strokeStyle = rim; ctx.lineWidth = 1.5; ctx.stroke();
    ctx.restore();

    // graticule
    ctx.strokeStyle = 'rgba(158,252,255,0.14)';
    ctx.lineWidth = 1;
    for(let lon=-180; lon<=180; lon+=15) drawMeridian(lon,R,cx,cy);
    for(let lat=-75; lat<=75; lat+=15) drawParallel(lat,R,cx,cy);

    // NYC ping
    const p = project(NYC.lat, NYC.lon, R, cx, cy);
    if(p){
      const t = performance.now();
      const r = 5 + 2*(0.5+0.5*Math.sin(t*0.006));
      ctx.beginPath(); ctx.arc(p.x,p.y,r*2.2,0,Math.PI*2);
      ctx.strokeStyle = 'rgba(255,43,43,.35)'; ctx.lineWidth=2; ctx.stroke();
      ctx.beginPath(); ctx.arc(p.x,p.y,r,0,Math.PI*2);
      ctx.fillStyle = '#ff2b2b'; ctx.shadowColor='rgba(255,43,43,.7)'; ctx.shadowBlur=14; ctx.fill();
      ctx.shadowBlur=0;
    }

    lambda0 += 0.00035; // slow rotation
    requestAnimationFrame(draw);
  }

  function start(){ fit(); draw(); }
  window.addEventListener('resize', fit, {passive:true});
  // autostart when globe screen is shown
  const obs = new MutationObserver(()=>{ if (screenGlobe.style.display==='flex') start(); });
  obs.observe(screenGlobe,{attributes:true,attributeFilter:['style']});
})();
</script>
</body>
</html>